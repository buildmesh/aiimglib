<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AI Image Gallery</title>
    <script type="module" crossorigin src="/assets/index-UAwYh_Eb.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/index-dtgFhnU-.css">
  </head>
  <body>
    <div id="app" class="app">
      <header class="app__header">
        <div>
          <h1>AI Image Library</h1>
          <p>Browse, upload, and edit your AI-generated artwork.</p>
        </div>
        <button id="addImageButton" class="primary">Add Media</button>
      </header>
      <section class="filters">
        <input type="text" id="searchInput" placeholder="Search prompts, notes, or models" />
        <details class="tag-filter">
          <summary id="tagFilterSummary">Tags</summary>
          <div class="tag-filter__panel">
            <select id="tagFilter" multiple size="6" aria-label="Filter by tags"></select>
            <p class="tag-filter__hint">Hold Ctrl or ⌘ to select multiple tags.</p>
          </div>
        </details>
        <input class="rating-input" type="number" id="ratingMin" placeholder="Min" min="0" max="5" step="0.1" />
        <input class="rating-input" type="number" id="ratingMax" placeholder="Max" min="0" max="5" step="0.1" />
        <input type="date" id="dateFrom" aria-label="Date from" />
        <input type="date" id="dateTo" aria-label="Date to" />
        <select id="mediaTypeFilter" aria-label="Media type filter">
          <option value="">All media</option>
          <option value="image">Images</option>
          <option value="video">Videos</option>
        </select>
        <button id="clearFiltersButton" class="ghost clear-button" type="button">Clear</button>
      </section>
      <div class="thumbnail-style">
        <label>
          Thumbnail Style
          <select id="thumbnailStyle">
            <option value="landscape">Landscape</option>
            <option value="portrait">Portrait</option>
            <option value="contain">Original Aspect</option>
          </select>
        </label>
      </div>
      <main id="gallery" class="gallery"></main>
      <p id="resultsSummary" class="results-summary">Showing 0 items</p>
      <div class="pagination">
        <button id="prevPage" class="secondary" type="button">Previous</button>
        <span id="pageIndicator">Page 1</span>
        <button id="nextPage" class="secondary" type="button">Next</button>
      </div>
      <template id="image-card-template">
        <article class="card" data-card>
          <div class="card__media" data-media>
            <img data-image src="" alt="" loading="lazy" />
            <div class="card__badge" data-video-badge hidden>Video</div>
          </div>
          <div class="card__body">
            <div class="card__actions">
              <button type="button" class="secondary" data-edit-button>Edit</button>
            </div>
            <div class="card__meta">
              <div class="card__rating" data-rating></div>
              <div class="card__date" data-date></div>
            </div>
            <p class="card__model" data-model></p>
            <div data-tags class="tags"></div>
          </div>
        </article>
      </template>
    </div>

    <section class="modal" id="uploadModal" hidden>
      <div class="modal__content">
        <header>
          <h2>Add New Media</h2>
          <button type="button" class="icon-button" data-close-modal="uploadModal">×</button>
        </header>
        <form id="uploadForm">
          <label>
            Media Type
            <select name="media_type" id="uploadMediaType">
              <option value="image">Image</option>
              <option value="video">Video</option>
            </select>
          </label>
          <label>
            Media File
            <input type="file" name="media_file" accept="image/*,video/*" required />
          </label>
          <label class="thumbnail-field" data-thumbnail-field="upload">
            Thumbnail File
            <input type="file" name="thumbnail_file" accept="image/*" />
          </label>
          <label>
            Prompt
            <textarea name="prompt_text" required></textarea>
          </label>
          <input type="hidden" name="prompt_meta" />
          <div class="reference-picker" data-reference-picker="upload">
            <div class="reference-picker__header">
              <h3>Prompt References</h3>
              <button type="button" class="secondary" data-add-reference="upload">Add Reference</button>
            </div>
            <ul class="reference-picker__list" data-reference-list="upload"></ul>
            <p class="reference-picker__hint">References let you link this prompt to previous results.</p>
          </div>
          <label>
            Tags (comma separated)
            <input type="text" name="tags" placeholder="space, sci-fi" />
          </label>
          <label>
            AI Model
            <input type="text" name="ai_model" placeholder="Model name" />
          </label>
          <label>
            Notes
            <textarea name="notes" placeholder="Optional notes"></textarea>
          </label>
          <label>
            Rating (0-5)
            <input type="number" name="rating" min="0" max="5" step="0.1" />
          </label>
          <label>
            Captured At
            <input type="datetime-local" name="captured_at" />
          </label>
          <footer>
            <button type="button" class="secondary" data-close-modal="uploadModal">Cancel</button>
            <button type="submit" class="primary">Upload</button>
          </footer>
        </form>
      </div>
    </section>

    <section class="modal" id="editModal" hidden>
      <div class="modal__content">
        <header>
          <h2>Edit Image</h2>
          <button type="button" class="icon-button" data-close-modal="editModal">×</button>
        </header>
        <form id="editForm">
          <input type="hidden" id="editImageId" />
          <input type="hidden" id="editPromptMeta" />
          <label>
            Media Type
            <select id="editMediaType">
              <option value="image">Image</option>
              <option value="video">Video</option>
            </select>
          </label>
          <label class="thumbnail-field" data-thumbnail-field="edit">
            Thumbnail File
            <input type="file" name="thumbnail_file" accept="image/*" />
          </label>
          <label>
            Prompt
            <textarea id="editPrompt" required></textarea>
          </label>
          <div class="reference-picker" data-reference-picker="edit">
            <div class="reference-picker__header">
              <h3>Prompt References</h3>
              <button type="button" class="secondary" data-add-reference="edit">Add Reference</button>
            </div>
            <ul class="reference-picker__list" data-reference-list="edit"></ul>
          </div>
          <label>
            Tags (comma separated)
            <input type="text" id="editTags" />
          </label>
          <label>
            AI Model
            <input type="text" id="editModel" />
          </label>
          <label>
            Notes
            <textarea id="editNotes"></textarea>
          </label>
          <label>
            Rating (0-5)
            <input type="number" id="editRating" min="0" max="5" step="0.1" />
          </label>
          <footer>
            <button type="button" class="secondary" data-close-modal="editModal">Cancel</button>
            <button type="submit" class="primary">Save Changes</button>
          </footer>
        </form>
      </div>
    </section>

    <section class="modal" id="detailModal" hidden>
      <div class="modal__content modal__content--wide">
        <header>
          <h2>Image Details</h2>
          <button type="button" class="icon-button" data-close-modal="detailModal">×</button>
        </header>
        <div class="detail-layout">
          <div class="detail-media">
            <img id="detailImage" alt="" loading="lazy" />
            <video id="detailVideo" controls hidden></video>
          </div>
          <div class="detail-layout__meta">
            <div class="detail-field">
              <strong>Prompt:</strong>
              <div id="detailPrompt" class="detail-prompt"></div>
            </div>
            <p><strong>Date:</strong> <span id="detailCapturedAt"></span></p>
            <p><strong>Model:</strong> <span id="detailModel"></span></p>
            <p><strong>Rating:</strong> <span id="detailRating"></span></p>
            <p><strong>Notes:</strong> <span id="detailNotes"></span></p>
            <div>
              <strong>Tags:</strong>
              <div id="detailTags" class="tags"></div>
            </div>
            <div>
              <strong>References:</strong>
              <div class="detail-references" id="detailReferences"></div>
            </div>
            <div>
              <strong>Used By:</strong>
              <div class="detail-references" id="detailDependents"></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="modal" id="referenceModal" hidden>
      <div class="modal__content modal__content--wide">
        <header>
          <h2>Select Reference</h2>
          <button type="button" class="icon-button" data-close-modal="referenceModal">×</button>
        </header>
        <div class="reference-search">
          <input type="text" id="referenceSearchInput" placeholder="Search media..." />
          <button type="button" id="referenceSearchButton" class="secondary">Search</button>
        </div>
        <ul id="referenceResults" class="reference-results"></ul>
        <div class="reference-pagination">
          <button type="button" id="referencePrevPage" class="secondary">Previous</button>
          <span id="referencePageIndicator">Page 1</span>
          <button type="button" id="referenceNextPage" class="secondary">Next</button>
        </div>
      </div>
    </section>
  </body>
</html>
